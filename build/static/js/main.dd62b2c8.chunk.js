(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{16:function(e,t,a){},30:function(e,t,a){e.exports=a(43)},42:function(e,t,a){},43:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(17),s=a.n(o),c=a(13),i=a(1),l=a.n(i),u=a(10),d=a(9),h=a(4),p=a(5),m=a(7),f=a(6),g=a(8),b=a(18),v=a(2),C="https://task-manager-by.herokuapp.com",E="".concat(C,"/cards"),j="".concat(C,"/card"),O="".concat(C,"/settings"),x="".concat(C,"/login"),y="".concat(C,"/register");function w(e){return k.apply(this,arguments)}function k(){return(k=Object(u.a)(l.a.mark(function e(t){var a,n,r,o,s,c,i,u;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.url,n=t.json,r=void 0===n||n,o=t.method,s=void 0===o?"GET":o,c=t.headers,i=t.body,e.next=3,fetch(a,{method:s,headers:c,body:i}).catch(function(e){throw new Error("Response Error!")});case 3:return u=e.sent,e.abrupt("return",r?S(u):u);case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}function S(e){return T.apply(this,arguments)}function T(){return(T=Object(u.a)(l.a.mark(function e(t){var a;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.json().catch(function(e){throw new Error("Json Error!")});case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function D(e){return w({url:j,method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify(e)})}function L(e){return B.apply(this,arguments)}function B(){return(B=Object(u.a)(l.a.mark(function e(t){var a;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w({url:x,method:"POST",json:!1,headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify(t)});case 2:if(!(a=e.sent).ok){e.next=9;break}return e.next=6,S(a);case 6:e.t0=e.sent,e.next=10;break;case 9:e.t0=a;case 10:return e.abrupt("return",e.t0);case 11:case"end":return e.stop()}},e)}))).apply(this,arguments)}function I(e){return w({url:y,method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify(e)})}function M(e,t){return w({url:"".concat(j,"/").concat(e),method:"PUT",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify(t)})}var P=a(24),F=(a(16),function(e){function t(){var e,a;Object(h.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(m.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(r)))).handleCloseModal=function(e){a.props.onCloseModal(),e.stopPropagation()},a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{onClick:this.handleCloseModal,class:"modal-overlay"},r.a.createElement("div",{onClick:function(e){return e.stopPropagation()},class:"modal-window"},r.a.createElement("div",{class:"flex-row"},r.a.createElement("div",{onClick:this.handleCloseModal,class:"button-x-big"},"\xd7")),this.props.children()))}}]),t}(r.a.Component)),_=a(29),J=function(e){function t(e){var a;return Object(h.a)(this,t),(a=Object(m.a)(this,Object(f.a)(t).call(this,e))).handleChangeText=function(e){a.setState({text:e.target.value})},a.handleChangeButton=function(){a.setState({isEditing:!0})},a.handleCancelButton=function(){a.setState({isEditing:!1,text:a.props.text})},a.handleSaveButton=function(){(0,a.props.onChangeText)(a.state.text),a.setState({isEditing:!1})},a.state={isEditing:!1,text:e.text},a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this.state,t=e.isEditing,a=e.text;return r.a.createElement("div",{class:"flex-row"},r.a.createElement("div",null,t?r.a.createElement("textarea",{onChange:this.handleChangeText},a):a),r.a.createElement("div",null,t?r.a.createElement(n.Fragment,null,r.a.createElement("button",{onClick:this.handleSaveButton},"Save"),r.a.createElement("button",{onClick:this.handleCancelButton},"Cancel")):r.a.createElement("button",{onClick:this.handleChangeButton},"Edit")))}}]),t}(r.a.Component),U=function(e){function t(){var e,a;Object(h.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(m.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(r)))).handleChangeDescription=function(e){var t=a.props;(0,t.onChangeDescription)(e,t.card)},a.handleChangeTitle=function(e){var t=a.props;(0,t.onChangeTitle)(e,t.card)},a.handleChangeStatus=function(e){var t=e.value,n=a.props;(0,n.onChangeStatus)(t,n.card)},a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this.props,t=e.isChanging,a=e.statuses,o=e.card,s=o.status,c=o.title,i=o.description,l=a&&a.map(function(e){return{value:e,label:e}});return r.a.createElement("div",null,r.a.createElement("div",null,t?r.a.createElement(n.Fragment,null,r.a.createElement(_.a,{defaultValue:{value:s,label:s},options:l,onChange:this.handleChangeStatus}),r.a.createElement(J,{text:c,onChangeText:this.handleChangeTitle}),r.a.createElement(J,{text:i,onChangeText:this.handleChangeDescription})):r.a.createElement("div",null,r.a.createElement("p",null,"Status: ".concat(s)),r.a.createElement("p",null,"Title: ".concat(c)),r.a.createElement("p",null,i))))}}]),t}(r.a.Component);function A(e){var t=e.path,a=e.initials;return t?r.a.createElement("img",{class:"section-card-info-graph-avatar avatar-lay",src:t,alt:""}):r.a.createElement("div",{class:"section-card-info-graph-initials flex-center"},a)}var N=function(e){function t(){var e,a;Object(h.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(m.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(r)))).handleDelete=function(e){a.props.onDeleteCard(Object(c.a)({},a.props)),e.stopPropagation()},a.handleModalInfo=function(e){a.props.onModalInfo(a.props),e.stopPropagation()},a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this.props,t=e._id,a=e.imageSrc,n=e.title,o=e.description,s=e.avatars,c=void 0===s?[]:s;return r.a.createElement("div",{onClick:this.handleModalInfo,class:"section-card flex-column"},r.a.createElement("div",{onClick:function(e){return e.stopPropagation()},class:"flex-row"},r.a.createElement(b.b,{class:"button-arrow-small",to:t},"\xbb"),r.a.createElement("div",{onClick:this.handleDelete,class:"button-x-small"},"\xd7")),r.a.createElement("div",{class:"section-card-title"},n),a?r.a.createElement("img",{class:"section-card-image",src:a,alt:""}):null,r.a.createElement("div",{class:"section-card-info flex-row"},r.a.createElement("div",{class:"section-card-info-text"},o),r.a.createElement("div",{class:"section-card-info-graph flex-row"},c.map(function(e){return r.a.createElement(A,e)}))))}}]),t}(r.a.Component);function R(e){var t=e.text,a=e.amount;return r.a.createElement("div",{class:"section-header flex-row"},r.a.createElement("div",{class:"section-header-name"},t),r.a.createElement("div",{class:"section-header-amount flex-center"},a))}var q=function(e){function t(){return Object(h.a)(this,t),Object(m.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this.props,t=e.status,a=e.cards,n=e.onModalInfo,o=e.onDeleteCard,s={text:t,amount:a.length};return r.a.createElement("div",{class:"section flex-column"},r.a.createElement(R,s),a&&a.map(function(e){return r.a.createElement(N,Object.assign({key:e._id,onDeleteCard:o,onModalInfo:n},e))}))}}]),t}(r.a.Component),K=function(e){function t(e){var a;return Object(h.a)(this,t),(a=Object(m.a)(this,Object(f.a)(t).call(this,e))).handleTitleChange=function(e){var t=e.target;a.setState({title:t.value})},a.handleCreate=function(e){a.props.onCreateCard(a.state.title),a.setState({title:""})},a.handleInputKeyPress=function(e){"Enter"===e.key&&a.handleCreate()},a.state={title:""},a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("input",{type:"text",value:this.state.title,onChange:this.handleTitleChange,onKeyPress:this.handleInputKeyPress}),r.a.createElement("button",{onClick:this.handleCreate},"Create"))}}]),t}(r.a.Component);function W(e,t){var a=null;return t&&Object.values(t).find(function(t){return a=t.find(function(t){return t._id===e})}),a||null}var G=function(e){function t(){var e,a;Object(h.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(m.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(r)))).handleCreateCard=function(){var e=Object(u.a)(l.a.mark(function e(t){var n,r,o,s,i,u,h;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.props.dataCard,r=n.statuses,o=n.dataByStatuses,s={title:t},e.next=4,D(s);case 4:i=e.sent,u=i.status,h=Object(c.a)({},o,Object(d.a)({},u,[].concat(Object(P.a)(o[u]||[]),[i]))),a.props.updateData({dataCard:{dataByStatuses:h,statuses:r}});case 8:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.handleDeleteCard=function(){var e=Object(u.a)(l.a.mark(function e(t){var n,r,o,s,i,u,h;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t._id,r=t.status,o=a.props.dataCard,s=o.statuses,i=o.dataByStatuses,e.next=4,l=n,w({url:"".concat(j,"/").concat(l),json:!1,method:"DELETE"}).then(function(e){return e.ok});case 4:if(e.sent){e.next=6;break}return e.abrupt("return");case 6:u=i[r].filter(function(e){return e._id!==n}),h=Object(c.a)({},i,Object(d.a)({},r,u)),u.length||delete h[r],a.props.updateData({dataCard:{dataByStatuses:h,statuses:s}});case 10:case"end":return e.stop()}var l},e)}));return function(t){return e.apply(this,arguments)}}(),a.handleChange=function(e){return function(){var t=Object(u.a)(l.a.mark(function t(n,r){var o,s,i,u,h,p;return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return o=r._id,s=r.status,i=a.props.dataCard,u=i.statuses,h=i.dataByStatuses,t.next=4,M(o,Object(d.a)({},e,n));case 4:p=h[s].map(function(t){return t._id===o?Object(c.a)({},t,Object(d.a)({},e,n)):t}),a.props.updateData({dataCard:{dataByStatuses:Object(c.a)({},h,Object(d.a)({},s,p)),statuses:u}});case 6:case"end":return t.stop()}},t)}));return function(e,a){return t.apply(this,arguments)}}()},a.handleChangeStatus=function(){var e=Object(u.a)(l.a.mark(function e(t,n){var r,o,s,i,u,h,p,m,f;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o=a.props.dataCard,s=o.statuses,i=o.dataByStatuses,u=n._id,h=n.status,e.next=4,M(u,{status:t});case 4:p=i[h].filter(function(e){return e._id!==u}),m=Object(c.a)({},n,{status:t}),f=Object(c.a)({},i,(r={},Object(d.a)(r,h,p),Object(d.a)(r,t,[].concat(Object(P.a)(i[t]),[m])),r)),a.props.updateData({dataCard:{dataByStatuses:f,statuses:s}});case 8:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}(),a.handleModalInfo=function(e){var t=e._id;document.body.style.overflow="hidden",a.props.updateData({idCard:t})},a.handleCloseModal=function(){document.body.style.overflow="visible",a.props.updateData({idCard:null})},a.handleLogout=function(){localStorage.removeItem("email"),a.props.updateData({isLogin:!1})},a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this,t=this.props.idCard,a=this.props.dataCard,o=a.statuses,s=a.dataByStatuses;return r.a.createElement(n.Fragment,null,r.a.createElement(K,{onCreateCard:this.handleCreateCard}),r.a.createElement("div",{class:"homepage-overlay flex-row"},r.a.createElement("div",{class:"flex-row"},o&&o.map(function(t){return r.a.createElement(q,{status:t,cards:s[t]||[],onDeleteCard:e.handleDeleteCard,onModalInfo:e.handleModalInfo})})),r.a.createElement("div",{class:"homepage-region-logout flex-column"},r.a.createElement("button",{onClick:this.handleLogout,class:"button-logout"},"Logout"))),t&&r.a.createElement(F,{onCloseModal:this.handleCloseModal},function(){return r.a.createElement(U,{isChanging:!0,statuses:o,card:W(t,s),onChangeStatus:e.handleChangeStatus,onChangeTitle:e.handleChange("title"),onChangeDescription:e.handleChange("description")})}))}}]),t}(r.a.Component);function V(e){var t=e.dataByStatuses,a=W(Object(v.g)().id,t);return a?r.a.createElement("div",null,r.a.createElement(U,{card:a})):r.a.createElement(v.a,{to:"/"})}function $(e){var t=e.buttonText,a=e.linkText,n=e.linkUrl,o=e.message,s=e.onSubmitLoginForm,c=e.onChangeLoginInput;return r.a.createElement("div",{class:"login-overlay"},r.a.createElement("div",{class:"flex-center login-window"},r.a.createElement("form",{onSubmit:s,class:"flex-column"},o&&r.a.createElement("div",{class:"login-message-region"},o),r.a.createElement("input",{onChange:c,class:"login-textbox-email",type:"text",name:"userEmail",placeholder:"Email or phone number"}),r.a.createElement("input",{onChange:c,class:"login-textbox-password",type:"password",name:"userPassword",placeholder:"Password"}),r.a.createElement("div",{class:"login-region-submit"},r.a.createElement("button",{class:"login-submit-button",name:t},t),r.a.createElement(b.b,{class:"login-link",to:n},a)))))}var z=function(e){function t(e){var a;Object(h.a)(this,t);var n=localStorage.getItem("email");return(a=Object(m.a)(this,Object(f.a)(t).call(this,e))).updateData=function(e){a.setState(e)},a.handlerChangeLoginInput=function(e){var t=e.target,n=t.value,r=t.name;a.setState(Object(d.a)({messageLoginForm:null},r,n))},a.handlerSubmitForm=function(e){return function(){var t=Object(u.a)(l.a.mark(function t(n){var r,o,s;return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),r={email:a.state.userEmail,password:a.state.userPassword},t.next=4,e(r);case 4:if(o=t.sent,localStorage.setItem("email",o.email),s=o.email,t.t0=a,t.t1=!!s,t.t2=s?null:"Wrong password or email!",!s){t.next=16;break}return t.next=13,a.dataRequest();case 13:t.t3=t.sent,t.next=17;break;case 16:t.t3={};case 17:t.t4=t.t3,t.t5={isLogin:t.t1,messageLoginForm:t.t2,dataCard:t.t4},t.t0.setState.call(t.t0,t.t5);case 20:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()},a.state={dataCard:{statuses:null,dataByStatuses:null},idCard:null,isLogin:!!n,email:n},a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){var e=Object(u.a)(l.a.mark(function e(){var t;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.state.email,e.t0=this,!t){e.next=8;break}return e.next=5,this.dataRequest();case 5:e.t1=e.sent,e.next=9;break;case 8:e.t1={};case 9:e.t2=e.t1,e.t3={dataCard:e.t2},e.t0.setState.call(e.t0,e.t3);case 12:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"dataRequest",value:function(){var e=Object(u.a)(l.a.mark(function e(){var t,a,n;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w({url:O});case 2:return t=e.sent,e.next=5,w({url:E});case 5:return a=e.sent,n={statuses:t,dataByStatuses:t.reduce(function(e,t){return Object(c.a)({},e,Object(d.a)({},t,[]))},{})},a.forEach(function(e){var t=Object(c.a)({},e).status;n.dataByStatuses[t].push(e)}),e.abrupt("return",n);case 9:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state,t=this.updateData,a=this.state,o=a.isLogin,s=a.messageLoginForm;return r.a.createElement(b.a,null,r.a.createElement(v.d,null,o?r.a.createElement(n.Fragment,null,r.a.createElement(v.b,{exact:!0,path:"/"},r.a.createElement(G,Object.assign({},e,{updateData:t}))),r.a.createElement(v.b,{path:"/:id"},r.a.createElement(V,this.state.dataCard))):r.a.createElement(n.Fragment,null,r.a.createElement(v.b,{exact:!0,path:"/"},r.a.createElement(v.a,{to:"/login"})),r.a.createElement(v.b,{path:"/login"},r.a.createElement($,{buttonText:"Login",linkText:"SignUp?",linkUrl:"/register",message:s,onSubmitLoginForm:this.handlerSubmitForm(L),onChangeLoginInput:this.handlerChangeLoginInput})),r.a.createElement(v.b,{path:"/register"},r.a.createElement($,{buttonText:"SignUp",linkText:"Login",linkUrl:"/login",onSubmitLoginForm:this.handlerSubmitForm(I),onChangeLoginInput:this.handlerChangeLoginInput})))))}}]),t}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(42);s.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(z,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()}).catch(function(e){console.error(e.message)})}},[[30,1,2]]]);
//# sourceMappingURL=main.dd62b2c8.chunk.js.map